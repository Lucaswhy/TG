    <h2>Pagar Contas</h2>

    <br>
    <hr>

    <div class="container" style="width: 1000px;">	
        <div class="card" style="width: 100%; height: 600px; overflow-y: scroll;">
            <table class="table">
                <thead>
                    <tr>
                    <th scope="col">Codigo da Conta</th>
                    <th scope="col">Valor</th>
                    <th scope="col">Data de Vencimento</th>
                    <th scope="col">Multa</th>
                    <th scope="col">Juros</th>
                    <th scope="col">Desconto</th>
                    </tr>
                </thead>
                {{#each conta}}
                <tbody>
                    <tr>
                    <th scope="row"><input type="checkbox" id="Conta" name="Conta"> {{codConta}}</th>
                    <td>{{valConta}}</td>
                    <input type="hidden" id="valConta" name="valConta" value="{{valConta}}">
                    <td>{{#formatDate dataVencimento}}{{/formatDate}}</td>
                    <td>{{Juros}}</td>
                    <td>{{Multa}}</td>
                    <td>{{Desconto}}</td>
                    </tr>
                    <input type="hidden" id="idConta" name="idConta" value="{{_id}}">
                </tbody>
                {{else}}

                {{/each}}
            </table>
        </div>
    </div>

    <form class="form-cadastro">
         <div class="form-row">

            <div class="col-md-2 mb-3">
                <label for="TotaldeContas">Contas selecionadas: </label>
                <input type="text" class="form-control" id="TotaldeContas" name="totalContas" value="" disabled>
            </div>           
                            
            <div class="col-md-2 mb-3">
                <label for="validationDefault02">Valor Total: </label>
                <input type="text" class="form-control" id="validationDefault02" name="totalValor" value="" disabled>
            </div>
            <div>
            <button id="btnPaga" type="button" class="btn btn-primary" onclick="pagar()">Pagar Avulso</button>
            </div>
            <a href="http:/localhost:8081/remessa"> <button class="btn btn-primary">Gerar Remessa</button> </a>
        
        </div>
    </form>


<script type="text/javascript">

    function qtdeContas(){

        var qtConta = document.getElementsByName('Conta');
        var qtdeSel = 0;
        var qtdeFal = 0;
        
        for (var i = 0; i < Conta.length; i++){
            
            if(qtConta[i].checked){
                qtdeSel = qtdeSel + 1;
            }

            else{
                qtdeFal = qtdeFal + 1;
            }

        }   
            document.getElementsByName("totalContas")[0].value =  qtdeSel;
            document.getElementsByName("totalContasF")[0].value =  qtdeFal;
    }   

    function valorTotal(){

        var Conta = document.getElementsByName('Conta');
        var vConta = document.getElementsByName('valConta');
        var vTotal = 0;
        var val = 0;
        
        for (var i = 0; i < Conta.length; i++){
            
            if(Conta[i].checked){
                var array = vConta[i].value.split(",");
                var cent = parseFloat(array[1]);
                var cent = cent/100;                

                vConta[i].value = vConta[i].value.replace(/[.]/g, "");
                val = parseFloat(vConta[i].value);
                vTotal = vTotal + val + cent;
            }
        }   
            document.getElementsByName("totalValor")[0].value = 'R$' + vTotal.toFixed(2).replace('.', ',').replace(/(\d)(?=(\d{3})+\,)/g, "$1.");
    }

    function pagar(){

        var Conta = document.getElementsByName('Conta');
        var vConta = document.getElementsByName('idConta');
        var bc = new String;
        
    for(var i = 0; i < Conta.length; i++){
        if(Conta[i].checked){
            if(bc != ""){
            bc = bc + "+" + String(vConta[i].value);
            }

            else{
                bc = String(vConta[i].value);
            }
         }
    }

         if(bc != ""){           
              window.location.href="/validaPagarConta/"+bc;
         }
         else{           
             alert("Nenhuma conta foi paga, pois, nenhuma foi selecionada.");
              window.location.href="http://localhost:8081/pagarconta/";
         }
    }
</script>