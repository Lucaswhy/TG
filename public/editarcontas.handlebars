	<h2>Editar Contas</h2>
	
	{{#each erros}}
    <div class="alert alert-danger">{{texto}}</div>
    {{else}}
    {{/each}}

	<style type="text/css">
        .form-cadastro {
            width: 100%;
            max-width: 1200px;
            padding: 15px;
            margin: auto;
            margin-top: 10px;
        }

        h2, h1{
            width: 100%;
            max-width: 1200px;
            padding: 10px;
            margin: auto;
            margin-top: 30px;
        }

        h3{
            width: 100%;
            max-width: 1200px;
            padding: 10px;
            margin: auto;
        }

        .btn-primary{
            background-color: #4ABDAC !important; 
            color: white !important;
            border-color: #4ABDAC !important;
        }

        .btn-primary:hover{
            background-color: #EFEFEF !important;
            color: black !important;
        }

        body{
            background-color: #EFEFEF !important;
        }

        nav{
            background-color: #4ABDAC !important;
        }

        #contas{
		    color: white;
        }
        
        #conscontas{
            background-color:white;
            color:black !important;
        }

        .navbar-nav > li > .dropdown-menu > a:hover, .navbar-nav > li > .dropdown-menu > a:active{background-color: #819FF7 !important;}

        .navbar-nav > li > .dropdown-menu { background-color: #4ABDAC !important; }

        .navbar-nav > li > .dropdown-menu > a {color: aliceblue}
    </style>

	<form class="form-cadastro" method="POST" action="/contaedicao">

		<input type="hidden" name="_id" value="{{conta._id}}">
        <br>
        <div class="form-row">
            <div class="col-md-3 mb-3">
                <label for="validationDefault02">Código da Conta</label>
                <input type="number" class="form-control" id="validationDefault01" placeholder="Cod. Conta" required name="CodConta" value="{{conta.codConta}}"> 
            </div>            
			<div class="col-md-4 mb-3">
                <label for="validationDefault02">Fornecedor</label>
                <input type="text" class="form-control" id="validationDefault03" placeholder="Fornecedor" required name="NomeFornecedor" value="{{conta.nomeFornecedor}}">
            </div>
  		</div>
        
        <div class="form-row">
            <div class="col-md-2 mb-3">
      			<label for="validationDefaultUsername">Valor da Conta</label>
      			<div class="input-group">
        			<div class="input-group-prepend">
          				<span class="input-group-text" id="valconta">R$</span>
        			</div>
        			<input type="text" class="form-control money" id="validationDefault02" placeholder="0,00" aria-describedby="inputGroupPrepend2" required name="ValConta2" value="{{#corrigirValor conta.valConta}}{{/corrigirValor}}">
      			    <input type="hidden" id="ValCont" name="ValConta" value="">
                </div>
    		</div>
            <div class="col-md-2 mb-3">
                <label for="validationDefault02">Juros</label>
                <input type="text" class="form-control percent" id="validationDefault04" placeholder="0%" required name="Juros" value="{{conta.Juros}}">
            </div>
            <div class="col-md-2 mb-3">
      			<label for="validationDefaultUsername">Multa</label>
      			<div class="input-group">
        			<div class="input-group-prepend">
          				<span class="input-group-text" id="inputGroupPrepend2">R$</span>
        			</div>
        			<input type="text" class="form-control money" id="validationDefault05" placeholder="0,00" aria-describedby="inputGroupPrepend2" required name="Multa2" value="{{#corrigirValor conta.Multa}}{{/corrigirValor}}">
      			    <input type="hidden" id="Mult" name="Multa" value="">
                  </div>
    		</div>
            <div class="col-md-2 mb-3">
                <label for="validationDefault02">Desconto</label>
                <input type="text" class="form-control percent" id="Desconto" placeholder="0%" required name="Desconto" value="{{conta.Desconto}}">
            </div>
        </div>

		<div class="form-row">
			<div class="col-md-2.5 mb-3">
				<label for="inputSituacao">Situação da conta</label>
				<select id="inputSituacao" class="form-control" name="Situacao">
					<option value="" disabled selected>{{conta.Situacao}}</option>
					<option>Fechada</option>
					<option>Aberta</option>
					<option>Cancelada</option>
				</select>
			</div>
		</div>

        <div class="form-row">
			<div class="col-md-2 mb-3">
                <label for="validationDefault01">Data de Emissão</label>
				<input type="text"  class="form-control" onfocus="(this.type='date')" onblur="(this.type='text')"  id="validationDefault07" name="DataEmissao" placeholder="{{#formatDate conta.dataEmissao}}{{/formatDate}}" >
            </div>
            <div class="col-md-2 mb-3">
                <label for="validationDefault02">Data de Vencimento</label>
                <input type="text"  class="form-control" onfocus="(this.type='date')" onblur="(this.type='text')" id="validationDefault08"  name="DataVencimento" placeholder="{{#formatDate conta.dataVencimento}}{{/formatDate}}" >
            </div>
        </div>

        <div class="form-row">
            <div class="col-md-5 mb-3">
				<label for="validationTextarea">Observação</label>
                <textarea class="form-control" id="validationDefault09" placeholder="Observação" name="Observacao" >{{conta.Observacao}}</textarea>
            </div>
            <div class="col-md-5 mb-3">
				<label for="validationTextarea">Descrição</label>
                <textarea class="form-control" id="validationDefault10" placeholder="Descrição" name="Descricao">{{conta.Descricao}}</textarea>
        	</div>
		</div>

        <button class="btn btn-primary" type="submit" onclick="sobrescreveData();limpaValor()">Editar</button>

    </form>

	<script type="text/javascript">
		function sobrescreveData(){

                de = new Date;
                dv = new Date;

                if (document.getElementsByName("DataEmissao")[0].value == ""){
            
                de = "{{#formatDateBD conta.dataEmissao}}{{/formatDateBD}}";
                    document.getElementsByName("DataEmissao")[0].value = de;
                }

                if (document.getElementsByName("DataVencimento")[0].value == ""){
                    
                dv = "{{#formatDateBD conta.dataVencimento}}{{/formatDateBD}}";
                    document.getElementsByName("DataVencimento")[0].value = dv;
                }
            }

			function limpaValor(){

				val = new String;
				mul = new String;

				val = document.getElementsByName("ValConta2")[0].value;
				mul = document.getElementsByName("Multa2")[0].value;

				val = val.replace(/[,]/g, ".");
				mul = mul.replace(/[,]/g, ".");

				var value = parseFloat(val);
				var multa = parseFloat(mul);
				
				document.getElementsByName("ValConta")[0].value = value.toFixed(2);

				document.getElementsByName("Multa")[0].value = multa.toFixed(2);
				
			}
	</script>